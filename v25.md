# Logaritminen aikajana v25

## Uudet ominaisuudet

### Kortin otsikon taustalaatikko

-   Jokaisen kortin otsikon taakse lisätty suorakulmio
    (`rect.card-label-bg`).
-   Täyttö: valkoinen (`fill="white"`) ja läpinäkyvyys (`opacity: 0.6`).
-   Piirretään aina ennen otsikkotekstiä, jolloin teksti jää päälle.
-   Laatikon y-koordinaatti alkaa kortin yläreunasta (`yTop`), korkeus
    n. 20 px.
-   Otsikkoteksti sijoitettu hieman laatikon sisään (`yTop + 11…14`).
-   Zoom-päivityksessä myös taustalaatikon paikka päivittyy → pysyy aina
    kortin mukana.
-   Vaihtoehtoisesti taustassa voidaan käyttää pystysuuntaista
    gradienttia (`url(#label-bg-gradient)`), jolloin alaosa on
    peittävämpi ja yläosa läpikuultavampi.

### Kortin otsikon sijainti

-   Otsikko nostettu kortin yläreunaan, aiemmin se oli 20 px kortin
    sisällä.
-   Clampaaminen varmistaa, että otsikko ei mene kortin ulkopuolelle
    zoomatessa.
-   Tekstiä nostettu hieman ylöspäin (`+11` → lähempänä laatikon
    yläreunaa).

### Info-laatikko oikeassa yläkulmassa

-   Näkyy pieni ℹ️-ikoni (`<div id="info-toggle">`).
-   Klikkaamalla avautuu `#info-box`-laatikko, jossa:
    -   Käyttöohjeet (zoom, vieritys, aktivointi, kommentit).
    -   `#status-message`, johon päivittyy JSON-latauksen tila (onnistui
        / fallback).
-   Klikkaamalla uudestaan laatikko sulkeutuu.
-   Klikkaamalla muualle sivulle laatikko myös sulkeutuu (event
    bubbling).
-   Toteutus: puhdas `div`, ei `<button>` → poistui oletustausta
    (valkoinen ympyrä).
-   CSS: `position:absolute; top:40px; right:10px;`, vaalea tausta,
    pyöristetyt kulmat, pieni box-shadow.

## Käyttöohje

-   **Zoomaus**: hiiren rullalla tai pinch-eleellä.
-   **Vieritys**: hiirellä raahaamalla.
-   **Kortin aktivointi**: klikkaa korttia.
-   **Kommenttien avaaminen**: pitkä painallus.
-   ℹ️: klikkaa avataksesi käyttöohjeen ja latausstatuksen.

## Tunnetut asiat

-   Otsikkolaatikon leveys on nyt kiinteä (80 px). Ei skaalaudu tekstin
    pituuden mukaan.
-   Info-laatikon ohjeet ovat kovakoodattu HTML:ään.
-   Mobile-näkymässä fonttikoko voisi olla vielä responsiivisempi.
-   Korttien otsikoiden fonttikoko on sama kaikilla dekadeilla.

## Tiedostorakenne

-   `log_aikajana_v25.html`: sisältää kaiken (HTML, CSS, JS) samassa
    tiedostossa.
-   Ei ulkoisia moduuleja.
-   `#status-message` päivittyy tiedostonlatauksesta (JSON).

## Seuraavat stepit

1.  **Info-laatikon dynaaminen sisältö**
    -   Luetaan `eventsDB.json`-tiedostosta erillinen metakenttä, esim:

        ``` json
        {
          "meta": {
            "help": "Zoom: hiiren rulla / pinch...",
            "about": "Data: eventsDB.json v1.2, päivitetty 21.8.2025"
          },
          "events": [ ... ]
        }
        ```

    -   `#help-message` → täytetään `meta.help`-sisällöllä.

    -   Status-viesti voisi myös kertoa versionumeron (`meta.about`).
2.  **Otsikon taustalaatikon parannus**
    -   Lasketaan tekstin pituus (`getBBox()`) ja sovitetaan laatikon
        leveys sen mukaan.
    -   Lisätään pieni horisontaalinen padding (6--8 px).
3.  **Responsiivisuus**
    -   Mobiilissa fonttikoko ja info-laatikon maksimileveys mukautetaan
        (`@media`-kyselyt).
    -   ℹ️-ikonin koko hieman suuremmaksi kosketusnäytöillä.
4.  **Teemat**
    -   Info-laatikkoon voisi ladata myös aktiivisen teeman tiedot
        (värit, kategoriat) JSONista.

------------------------------------------------------------------------
